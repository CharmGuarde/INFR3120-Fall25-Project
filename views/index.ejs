<div class="page-container d-flex justify-content-center w-100">
  <div class="glass-card w-100" style="max-width: 850px;">

    <!-- Page Title -->
    <h1 class="text-center text-white mb-4">Your Tasks</h1>

    <!-- Add Task Form -->
    <form action="/add" method="POST" class="mb-4">
      <div class="row">
        <div class="col-md-4 mb-3">
          <label class="form-label text-white">Title</label>
          <input type="text" name="title" class="form-control" required placeholder="Task name">
        </div>

        <div class="col-md-4 mb-3">
          <label class="form-label text-white">Due Date</label>
          <input type="date" name="dueDate" class="form-control">
        </div>

        <div class="col-md-4 mb-3">
          <label class="form-label text-white">Priority</label>
          <select name="priority" class="form-select">
            <option>High</option>
            <option selected>Medium</option>
            <option>Low</option>
          </select>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label text-white">Description</label>
        <textarea name="description" class="form-control" rows="2"></textarea>
      </div>

      <button class="btn btn-primary w-100 glass-btn">Add Task</button>
    </form>

    <!-- Task List Table -->
    <table class="table table-hover text-white">
      <thead>
        <tr>
          <th>Title</th>
          <th>Due</th>
          <th>Priority</th>
          <th>Status</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>

      <tbody>
        <% tasks.forEach(task => { %>
        <tr style="<%= task.completed ? 'opacity:0.5; text-decoration:line-through;' : '' %>">
          <td><%= task.title %></td>

          <td>
            <%= task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '—' %>
          </td>

          <td>
            <% if (task.priority === 'High') { %>
              <span class="badge bg-danger">High</span>
            <% } else if (task.priority === 'Low') { %>
              <span class="badge bg-success">Low</span>
            <% } else { %>
              <span class="badge bg-warning text-dark">Medium</span>
            <% } %>
          </td>

          <td>
            <% if (task.completed) { %>
              ✔ Done
            <% } else { %>
              ⏳ Active
            <% } %>
          </td>

          <!-- Action Buttons -->
          <td class="text-center">

            <!-- Toggle Completed -->
            <form action="/toggle/<%= task._id %>" method="POST" class="d-inline">
              <button class="btn btn-sm btn-success"><%= task.completed ? 'Undo' : 'Done' %></button>
            </form>

            <!-- Edit -->
            <form action="/edit/<%= task._id %>" method="POST" class="d-inline">
              <button class="btn btn-sm btn-warning">Edit</button>
            </form>

            <!-- Delete -->
            <form action="/delete/<%= task._id %>" method="POST" class="d-inline">
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>

          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>

  </div>
</div>
